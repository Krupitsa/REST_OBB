{
	"info": {
		"_postman_id": "9a3dbfeb-8f31-4739-9b9d-e25efb276064",
		"name": "Documents",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Creating a document 0002 (Filter)",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 201\", function () {\r",
							"    pm.response.to.have.status(201);\r",
							"});\r",
							"\r",
							"pm.test(\"Id is correct\", function () {\r",
							"    pm.response.to.have.jsonBody(\"id\", \"0002\");\r",
							"});\r",
							"\r",
							"pm.test(\"appMnemo is correct\", function () {\r",
							"    pm.response.to.have.jsonBody(\"appMnemo\", \"Restapp\");\r",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{token}}",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [
					{
						"key": "accept",
						"value": "application/json",
						"type": "text"
					},
					{
						"key": "content-type",
						"value": "application/json",
						"type": "text"
					},
					{
						"key": "DFE-APP-Mnemo",
						"value": "Restapp",
						"type": "text"
					},
					{
						"key": "DFE-APP-VER",
						"value": "1.1.3",
						"type": "text"
					},
					{
						"key": "DFE-APP-Mnemo",
						"value": "tap",
						"type": "text",
						"disabled": true
					},
					{
						"key": "DFE-APP-VER",
						"value": "1.1.1122",
						"type": "text",
						"disabled": true
					},
					{
						"key": "",
						"value": "",
						"type": "text"
					},
					{
						"key": "",
						"value": "",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\"id\":\"0002\",\"mnemo\":\"tap.BuhgalterskayaSpravka\",\"number\":\"0003\",\"date\":\"1628065010380\",\"transactionTemplateId\":\"tap.BuhgalterskayaSpravka.Standartnyii\",\"childDocsCollections\":[],\"postingCollection\":[],\"documentPropsCollection\":[],\"documentHeadDetailsCollection\":[{\"name\":\"tap.BuhgalterskayaSpravka.hr.Opisanie\",\"value\":\"55\",\"documentHeadRequisiteProps\":[]}],\"documentTableDetailsCollection\":[{\"recId\":\"f89a4bb8-5c69-49c2-88bd-fd833c55&1\",\"name\":\"tap.BuhgalterskayaSpravka.tr.NaimenovanieIOpisanieOperacii\",\"value\":\"5\",\"documentTableRequisiteProps\":[]},{\"recId\":\"f89a4bb8-5c69-49c2-88bd-fd833c55&1\",\"name\":\"tap.BuhgalterskayaSpravka.tr.NomerSchetaPoDebitu\",\"value\":\"00000000000000000030241000\",\"documentTableRequisiteProps\":[]},{\"recId\":\"f89a4bb8-5c69-49c2-88bd-fd833c55&1\",\"name\":\"tap.BuhgalterskayaSpravka.tr.NomerSchetaPoKreditu\",\"value\":\"00000000000000000030241000\",\"documentTableRequisiteProps\":[]},{\"recId\":\"f89a4bb8-5c69-49c2-88bd-fd833c55&1\",\"name\":\"tap.BuhgalterskayaSpravka.tr.Summa\",\"value\":55,\"documentTableRequisiteProps\":[]}]}"
				},
				"url": {
					"raw": "{{hostTest}}/rest/document",
					"host": [
						"{{hostTest}}"
					],
					"path": [
						"rest",
						"document"
					]
				}
			},
			"response": []
		},
		{
			"name": "Creating a document 0003 (Filter)",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 201\", function () {\r",
							"    pm.response.to.have.status(201);\r",
							"});\r",
							"\r",
							"pm.test(\"Id is correct\", function () {\r",
							"    pm.response.to.have.jsonBody(\"id\", \"0003\");\r",
							"});\r",
							"\r",
							"pm.test(\"appMnemo is correct\", function () {\r",
							"    pm.response.to.have.jsonBody(\"appMnemo\", \"tap\");\r",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{token}}",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [
					{
						"key": "accept",
						"value": "application/json",
						"type": "text"
					},
					{
						"key": "content-type",
						"value": "application/json",
						"type": "text"
					},
					{
						"key": "DFE-APP-Mnemo",
						"value": "Restapp",
						"type": "text",
						"disabled": true
					},
					{
						"key": "DFE-APP-VER",
						"value": "1.1.3",
						"type": "text",
						"disabled": true
					},
					{
						"key": "DFE-APP-Mnemo",
						"value": "tap",
						"type": "text"
					},
					{
						"key": "DFE-APP-VER",
						"value": "1.1.1906",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\"id\":\"0003\",\"mnemo\":\"tap.BuhgalterskayaSpravka\",\"number\":\"0003\",\"date\":\"1628065010380\",\"transactionTemplateId\":\"tap.BuhgalterskayaSpravka.Standartnyii\",\"childDocsCollections\":[],\"postingCollection\":[],\"documentPropsCollection\":[],\"documentHeadDetailsCollection\":[{\"name\":\"tap.BuhgalterskayaSpravka.hr.Opisanie\",\"value\":\"55\",\"documentHeadRequisiteProps\":[]}],\"documentTableDetailsCollection\":[{\"recId\":\"f89a4bb8-5c69-49c2-88bd-fd833c55&1\",\"name\":\"tap.BuhgalterskayaSpravka.tr.NaimenovanieIOpisanieOperacii\",\"value\":\"5\",\"documentTableRequisiteProps\":[]},{\"recId\":\"f89a4bb8-5c69-49c2-88bd-fd833c55&1\",\"name\":\"tap.BuhgalterskayaSpravka.tr.NomerSchetaPoDebitu\",\"value\":\"00000000000000000030241000\",\"documentTableRequisiteProps\":[]},{\"recId\":\"f89a4bb8-5c69-49c2-88bd-fd833c55&1\",\"name\":\"tap.BuhgalterskayaSpravka.tr.NomerSchetaPoKreditu\",\"value\":\"00000000000000000030241000\",\"documentTableRequisiteProps\":[]},{\"recId\":\"f89a4bb8-5c69-49c2-88bd-fd833c55&1\",\"name\":\"tap.BuhgalterskayaSpravka.tr.Summa\",\"value\":55,\"documentTableRequisiteProps\":[]}]}"
				},
				"url": {
					"raw": "{{hostTest}}/rest/document",
					"host": [
						"{{hostTest}}"
					],
					"path": [
						"rest",
						"document"
					]
				}
			},
			"response": []
		},
		{
			"name": "Getting the document",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"pm.test(\"Id is correct\", function () {\r",
							"    pm.response.to.have.jsonBody(\"id\", \"0002\");\r",
							"});\r",
							"\r",
							"pm.test(\"Mnemo is correct\", function () {\r",
							"    pm.response.to.have.jsonBody(\"mnemo\", \"tap.BuhgalterskayaSpravka\");\r",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{token}}",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [
					{
						"key": "accept",
						"value": "application/json",
						"type": "text"
					},
					{
						"key": "DFE-APP-Mnemo",
						"value": "Restapp",
						"type": "text"
					},
					{
						"key": "DFE-APP-VER",
						"value": "1.1.3",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{hostTest}}/rest/document/0002",
					"host": [
						"{{hostTest}}"
					],
					"path": [
						"rest",
						"document",
						"0002"
					]
				}
			},
			"response": []
		},
		{
			"name": "Getting a list of documents",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"responseJson = JSON.parse(responseBody);\r",
							"var list = responseJson.records.length;\r",
							"tests[\"Validate service retuns 1 records\"] = list >= 1\r",
							"\r",
							"//pm.test(\"Id is true\", function () {\r",
							"//    var jsonData = pm.response.json();\r",
							" //   pm.expect(jsonData.records[1].id).to.eql(\"1\");\r",
							"//});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{token}}",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [
					{
						"key": "accept",
						"value": "application/json",
						"type": "text"
					},
					{
						"key": "DFE-APP-Mnemo",
						"value": "Restapp",
						"type": "text"
					},
					{
						"key": "DFE-APP-VER",
						"value": "1.1.3",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{hostTest}}/rest/document/list",
					"host": [
						"{{hostTest}}"
					],
					"path": [
						"rest",
						"document",
						"list"
					]
				}
			},
			"response": []
		},
		{
			"name": "Updating the document",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"pm.test(\"Body is empty\", function () {\r",
							"    pm.response.to.have.body(\"\");\r",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{token}}",
							"type": "string"
						}
					]
				},
				"method": "PUT",
				"header": [
					{
						"key": "Accept",
						"value": "application/json",
						"type": "text"
					},
					{
						"key": "content-type",
						"value": "application/json",
						"type": "text"
					},
					{
						"key": "DFE-APP-Mnemo",
						"value": "Restapp",
						"type": "text"
					},
					{
						"key": "DFE-APP-VER",
						"value": "1.1.3",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\"id\":\"0002\",\"mnemo\":\"tap.BuhgalterskayaSpravka\",\"number\":\"0011\",\"date\":\"1624366626622\",\"childDocsCollections\":[],\"postingCollection\":[],\"documentPropsCollection\":[],\"documentHeadDetailsCollection\":[{\"name\":\"tap.BuhgalterskayaSpravka.hr.Opisanie\",\"value\":\"описание\",\"documentHeadRequisiteProps\":[]}],\"documentTableDetailsCollection\":[{\"recId\":\"0b38fc14-0ee6-4974-8a4d-948c61a4&1\",\"name\":\"tap.BuhgalterskayaSpravka.tr.NaimenovanieIOpisanieOperacii\",\"value\":\"001100\",\"documentTableRequisiteProps\":[]},{\"recId\":\"0b38fc14-0ee6-4974-8a4d-948c61a4&1\",\"name\":\"tap.BuhgalterskayaSpravka.tr.Summa\",\"value\":\"600\",\"documentTableRequisiteProps\":[]},{\"recId\":\"0b38fc14-0ee6-4974-8a4d-948c61a4&1\",\"name\":\"tap.BuhgalterskayaSpravka.tr.NomerSchetaPoDebitu\",\"value\":\"00000000000000000030241000\",\"documentTableRequisiteProps\":[{\"name\":\"tap.BuhgalterskayaSpravka.tr.NomerSchetaPoDebitu_analytics_0\",\"value\":\"ed6249ae-77b1-43b6-a63a-cadfecf2856a\"}]},{\"recId\":\"0b38fc14-0ee6-4974-8a4d-948c61a4&1\",\"name\":\"tap.BuhgalterskayaSpravka.tr.NomerSchetaPoKreditu\",\"value\":\"00000000000000000030241000\",\"documentTableRequisiteProps\":[{\"name\":\"tap.BuhgalterskayaSpravka.tr.NomerSchetaPoKreditu_analytics_0\",\"value\":\"e9a14a1d-ff4a-4433-88e2-6c0d24237822\"}]}]}"
				},
				"url": {
					"raw": "{{hostTest}}/rest/document/",
					"host": [
						"{{hostTest}}"
					],
					"path": [
						"rest",
						"document",
						""
					]
				}
			},
			"response": []
		},
		{
			"name": "Getting the document after updating",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"pm.test(\"Id is correct\", function () {\r",
							"    pm.response.to.have.jsonBody(\"id\", \"0002\");\r",
							"});\r",
							"\r",
							"pm.test(\"Mnemo is correct\", function () {\r",
							"    pm.response.to.have.jsonBody(\"mnemo\", \"tap.BuhgalterskayaSpravka\");\r",
							"});\r",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{token}}",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [
					{
						"key": "accept",
						"value": "application/json",
						"type": "text"
					},
					{
						"key": "DFE-APP-Mnemo",
						"value": "Restapp",
						"type": "text"
					},
					{
						"key": "DFE-APP-VER",
						"value": "1.1.3",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{hostTest}}/rest/document/0002",
					"host": [
						"{{hostTest}}"
					],
					"path": [
						"rest",
						"document",
						"0002"
					]
				}
			},
			"response": []
		},
		{
			"name": "Executing document (Filter)",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"pm.test(\"Id is correct\", function () {\r",
							"    pm.response.to.have.jsonBody(\"status\", \"COMPLETED\");\r",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{token}}",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [
					{
						"key": "accept",
						"value": "application/json",
						"type": "text"
					},
					{
						"key": "content-type",
						"value": "application/json",
						"type": "text"
					},
					{
						"key": "DFE-APP-Mnemo",
						"value": "tap",
						"type": "text",
						"disabled": true
					},
					{
						"key": "DFE-APP-VER",
						"value": "1.1.1122",
						"type": "text",
						"disabled": true
					},
					{
						"key": "DFE-APP-Mnemo",
						"value": "Restapp",
						"type": "text",
						"disabled": true
					},
					{
						"key": "DFE-APP-VER",
						"value": "1.1.3",
						"type": "text",
						"disabled": true
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\"appId\":\"tap\",\"appVersion\":\"1.1.1906\",\"operationTitle\":\"activate\",\"operationParameters\":{\"entityId\":\"tap.BuhgalterskayaSpravka\",\"documentDbId\":\"0003\"}}"
				},
				"url": {
					"raw": "{{hostTest}}/script/execute",
					"host": [
						"{{hostTest}}"
					],
					"path": [
						"script",
						"execute"
					]
				}
			},
			"response": []
		},
		{
			"name": "Getting a list of documents (Filter)",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"responseJson = JSON.parse(responseBody);\r",
							"var list = responseJson.records.length;\r",
							"tests[\"Validate service retuns 1 records\"] = list >= 1"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{token}}",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [
					{
						"key": "accept",
						"value": "application/json",
						"type": "text"
					},
					{
						"key": "DFE-APP-Mnemo",
						"value": "tap",
						"type": "text",
						"disabled": true
					},
					{
						"key": "DFE-APP-VER",
						"value": "1.1.1122",
						"type": "text",
						"disabled": true
					},
					{
						"key": "DFE-APP-Mnemo",
						"value": "Restapp",
						"type": "text"
					},
					{
						"key": "DFE-APP-VER",
						"value": "1.1.3",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{hostTest}}/rest/document/list/tap.BuhgalterskayaSpravka?filter=[{\"mnemo\":\"number\",\"restriction\":{\"valueType\":\"primitive.text\",\"kindOf\":0,\"values\":[\"0011\"],\"type\":0}},{\"mnemo\":\"executed\",\"restriction\":{\"valueType\":\"primitive.boolean\",\"kindOf\":0,\"values\":[false],\"type\":0}}]",
					"host": [
						"{{hostTest}}"
					],
					"path": [
						"rest",
						"document",
						"list",
						"tap.BuhgalterskayaSpravka"
					],
					"query": [
						{
							"key": "DFE-APP-MNEMO",
							"value": "Restapp",
							"disabled": true
						},
						{
							"key": "DFE-APP-VER",
							"value": "1.1.3",
							"disabled": true
						},
						{
							"key": "filter",
							"value": "[{\"mnemo\":\"number\",\"restriction\":{\"valueType\":\"primitive.text\",\"kindOf\":0,\"values\":[\"0011\"],\"type\":0}},{\"mnemo\":\"executed\",\"restriction\":{\"valueType\":\"primitive.boolean\",\"kindOf\":0,\"values\":[false],\"type\":0}}]"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Delete the document 0002 (Filter)",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"pm.test(\"Body is empty\", function () {\r",
							"    pm.response.to.have.body(\"\");\r",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{token}}",
							"type": "string"
						}
					]
				},
				"method": "DELETE",
				"header": [
					{
						"key": "Accept",
						"value": "application/json",
						"type": "text"
					},
					{
						"key": "DFE-APP-Mnemo",
						"value": "Restapp",
						"type": "text"
					},
					{
						"key": "DFE-APP-VER",
						"value": "1.1.3",
						"type": "text"
					},
					{
						"key": "DFE-APP-VER",
						"value": "1.1.1122",
						"type": "text",
						"disabled": true
					},
					{
						"key": "DFE-APP-Mnemo",
						"value": "tap",
						"type": "text",
						"disabled": true
					}
				],
				"url": {
					"raw": "{{hostTest}}/rest/document/0002",
					"host": [
						"{{hostTest}}"
					],
					"path": [
						"rest",
						"document",
						"0002"
					]
				}
			},
			"response": []
		},
		{
			"name": "Delete the document 0003 (Filter)",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"pm.test(\"Body is empty\", function () {\r",
							"    pm.response.to.have.body(\"\");\r",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{token}}",
							"type": "string"
						}
					]
				},
				"method": "DELETE",
				"header": [
					{
						"key": "Accept",
						"value": "application/json",
						"type": "text"
					},
					{
						"key": "DFE-APP-Mnemo",
						"value": "Restapp",
						"type": "text",
						"disabled": true
					},
					{
						"key": "DFE-APP-VER",
						"value": "1.1.3",
						"type": "text",
						"disabled": true
					},
					{
						"key": "DFE-APP-VER",
						"value": "1.1.1122",
						"type": "text"
					},
					{
						"key": "DFE-APP-Mnemo",
						"value": "tap",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{hostTest}}/rest/document/0003",
					"host": [
						"{{hostTest}}"
					],
					"path": [
						"rest",
						"document",
						"0003"
					]
				}
			},
			"response": []
		},
		{
			"name": "Getting the document after delete",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 404\", function () {\r",
							"    pm.response.to.have.status(404);\r",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{token}}",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [
					{
						"key": "accept",
						"value": "application/json",
						"type": "text"
					},
					{
						"key": "DFE-APP-Mnemo",
						"value": "Restapp",
						"type": "text"
					},
					{
						"key": "DFE-APP-VER",
						"value": "1.1.3",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{hostTest}}/rest/document/1",
					"host": [
						"{{hostTest}}"
					],
					"path": [
						"rest",
						"document",
						"1"
					]
				}
			},
			"response": []
		}
	]
}